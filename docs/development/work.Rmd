```{r}
getwd()
```

## Ongoing work

* [Oct 2014] Use a client side table sorter,
such as the [JQuery tablesorter](http://tablesorter.com/docs/)
The plugin requires the thead and tbody tags, which are generated by Rmarkdown.
Calling the javascript files should be possible within a YAML document, see
[HTML document format](http://rmarkdown.rstudio.com/html_document_format.html).
    + I linked to the necessary javascript in docs/www/include/in_header.html
    + It basically works, CSS styles need to be added so that we can see little sorting arrows. See sample table in docs/www/index.html

### Work for programmers of the production system
* Automate data load from comtrade
    * Use loadcomtrade_bycode() as a function
    * Replace loadcomtrade_bycode() by a software that loads json files from comtrade, and places the content in a raw comtrade table in a SQL database
* Automate clean mechanism
    * Call R functions in clean.R from the server to clean the raw data
  from the database. Put cleaned data in the database.

### Bugs
20141208 A bug in Lyx prevents me from generating pdfs
    when the text contains a euro â‚¬ sign.


### Eurostat Comext
Load monthly data
Load yearly data
Rename columns
Copy into a database


### TODO by order of ease / importance
* Add all reporters and partners to the test dataset
* Change the docs/development folder into vignettes.
* use an environmennt variable for the yearbegin and yearend of the
function that chooses between reporter and partner volume
* Create a trac system with externam accesss to track progress.
* in checkdbcolumns() Use sqlquery <- "SELECT `COLUMN_NAME`
FROM `INFORMATION_SCHEMA`.`COLUMNS`
WHERE `TABLE_SCHEMA`='tradeflows'
AND `TABLE_NAME`='validated_flow_yearly';"
instead of loading a data frame to check the column names.
Because loading a data frame doesn't work when the table is
empty.
* create a function to display product codes available
or a function that returns an uncollected tbl dplyr object
on which to run arbitrary dplyr statements.
--> This might not actually be needed.
* calculate regional prices as a ponderation of
import and export prices as done in Chasamil2000
--> Actually regional import and export price should be different
* discrepancy report
in the server function,
add a parameter to the loadcomtrade_bycode function to render this optional
log validataion status of jsonfiles with
fileConn<-file("output.txt")
writeLines(c("Hello","World"), fileConn)
close(fileConn)
Change the docs/development folder into vignettes.

* Calculate median prices by region patner and see how
  using partner prices for conversion impacts the
  world trade flows
* Floating table of content for html reports with a custom csss
  http://rpubs.com/stevepowell99/floating-css
* Use aesthetic to make points more transparent on a coutry * contry grid
 display trade volume as alpha level.
 see also docs/development/ggplot2
* use package options, inspired by the devtools or knitr package
  "Devtools uses the following options to configure behaviour:..."
* Time plot of HS by quantity, weight or value data (ggplot gant chart) to
visualise missing data
* load from EUROSTAT comext at 10 digit level
* Javascript visualisation: [Add googleVis and Rcharts to Markdown documents](http://al2na.github.io/Rmarkdown_JSviz/)

## Done
20151103 Methodology report add a paragraph on the different types of predefined automated reports that can be generated, with indication of the parameters that can be set. Four different report types: - completeness report - discrepancy report - overview report- trade network analysis 
3: Add abstract to country overview report
20151023 commit a58d6e4fb Overview report should be based on the validated data
         and include quantity besides trade values
20151009 Section titles in the overview report should be those JFSQ-1 names
         Generate overview report plots accroding to JFSQ product codes.
20151009 Overview report list the 10 largest exporters and 10 largest importers in all plots.
20150904 Include partner data into the quantity estimation for those which have missing partner data.
         in commit c3d92e77e33008eef2eef64fb465c77d0829bb73
         git diff fd724fa080cc c3d92e77e330 # View changes introduced
         See the function addmissingmirrorflow()

     
## Project issues + requests
* place the methodology report datasets and plots in an R script that can be called from the package
* Product report on the number of countries under each flag.
* Export prices and conversion factors to Excel files
[Next version] Write conversion factors, prices and choice description to the database during the cleaning process
