---
title: "Experiments with Forest Products Trade Flow Data"
html_document:
  toc: true
---

Steve Johnson described the purpose of the forest products trade flow database as: 
Procedures to automatically grab data from the 
COMTRADE and COMEXT system, feed it through algorithms to compare 
and amend unit values and mirror export and
import values, and then to deliver to the online user-interface.


Examples and demonstration:

* See example use in  the docw/www folder.


### Input
Data from the comtrade API

### Output



##Tools
### This is a package
Created based on [instructions from Hadley](http://r-pkgs.had.co.nz/).
`devtools::load_all()` or __Cmd + Shift + L__, reloads all code in the package.
Add packages to the list of required packages
`devtools::use_package("dplyr")`
`devtools::use_package("ggplot2", "suggests")`
For data I followed his recommendations in r-pkgs/data.rmd
`devtools::use_data(mtcars)`
`devtools::use_data_raw()` # To create a data-raw/ folder and add it to .Rbuildignore
    
### Documentation using roxygen2
`vignette("namespace", package = "roxygen2")` says:
```
If you are using just a few functions from another package, the recommended option is to note the package name in the Imports: field of the DESCRIPTION file and call the function(s) explicitly using ::, e.g., pkg::fun(). Alternatively, though no longer recommended due to its poorer readability, use @importFrom, e.g., @importFrom pgk fun, and call the function(s) without ::.

If you are using many functions from another package, use @import package to import them all and make available without using ::.
```
But Hadley says:

> Alternatively, if you are repeatedly using many functions from another package, you can import them in one command with @import package. This is the least recommended solution: it makes your code harder to read (because you canâ€™t tell where a function is coming from), and if you @import many packages, the chance of a conflicting function names increases.

calling packages might have to be changed to follow Hadley's recommendations
on how package namespaces: http://r-pkgs.had.co.nz/namespace.html
see also vignette("namespace", package = "roxygen2")
require(RJSONIO)
require(dplyr)

inspired by the documentation of roxygenize
https://github.com/yihui/roxygen2/blob/master/R/roxygenize.R


### Version tracking system with git
The .git repository is backed on bitbucket.
Use devtools::install_bitbucket() to install the package.


### Shiny
A demonstration with time series plot and bar chart will be made
with shiny and the ggplot2 package, based on the diamond example using.


## Ongoing work
* [Oct 2014] Use a client side table sorter, 
such as the [JQuery tablesorter](http://tablesorter.com/docs/)
The plugin requires the thead and tbody tags, which are generated by Rmarkdown. 
Calling the javascript files should be possible within a YAML document, see 
[HTML document format](http://rmarkdown.rstudio.com/html_document_format.html).
    + I linked to the necessary javascript in docs/www/include/in_header.html
    + It basically works, CSS styles need to be added so that we can see little sorting arrows. See sample table in docs/www/index.html
    
## TODO
* Javascript visualisation: [Add googleVis and Rcharts to Markdown documents](http://al2na.github.io/Rmarkdown_JSviz/)

